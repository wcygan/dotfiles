# Neovim Configuration Skill - Summary

**Created:** 2025-11-01
**Type:** Project-local skill (dotfiles repository)
**Status:** ✅ Active

## Purpose

Enables Claude to configure Neovim editor with modern Lua-based configuration, plugin management (lazy.nvim), LSP setup, keymaps, and editor options.

## Activation Triggers

The skill activates when user requests contain:

- **Keywords:** neovim, nvim, init.lua, vim, plugin, LSP, keymap, configure, vimscript
- **Phrases:**
  - "Set up my Neovim configuration"
  - "Add Telescope to Neovim"
  - "Configure rust-analyzer in nvim"
  - "Change Neovim tab size to 2"
  - "Add keybinding for save"

## Configuration Context

**Current state:** Configuration directory exists but is empty (`config/nvim/`)

**Target location:** Symlinked to `~/.config/nvim/` (XDG Base Directory standard)

**Effect:** All changes apply globally to Neovim installation

## Capabilities

### 1. Configuration Structure

- **init.lua** - Main entry point
- **lua/config/** - Core configuration modules
  - options.lua - Editor settings
  - keymaps.lua - Keybindings
  - autocmds.lua - Autocommands
  - lazy.lua - Plugin manager bootstrap
- **lua/plugins/** - Individual plugin specifications

### 2. Plugin Management

- lazy.nvim plugin manager setup
- Plugin lazy loading strategies (event, cmd, keys, ft)
- Dependency management
- Automatic installation and updates
- Performance optimization

### 3. Language Server Protocol

- Mason.nvim for LSP server installation
- nvim-lspconfig for server configuration
- Server-specific settings (Rust, Go, Python, TypeScript, Lua)
- LSP keybindings and capabilities
- Diagnostic display and navigation

### 4. Editor Configuration

- UI options (line numbers, colors, signs)
- Tab and indentation settings
- Search behavior (ignorecase, smartcase)
- Split window preferences
- Performance tuning (updatetime, timeoutlen)
- File handling (backup, swap, undo)

### 5. Keybinding System

- Leader key configuration (space)
- Window navigation (Ctrl+hjkl)
- Buffer management (Shift+hl)
- LSP keybindings (gd, gr, K, etc.)
- Custom commands with descriptions

### 6. Autocommands

- Highlight on yank
- Restore cursor position on file open
- Format on save (configurable per language)
- Close certain filetypes with 'q'
- Auto-create directories when saving

## File Structure

```
.claude/skills/nvim-config/
├── SKILL.md              # Main instructions (715 lines)
├── REFERENCE.md          # Advanced patterns (927 lines)
├── README.md             # User documentation (329 lines)
└── scripts/
    └── setup-nvim.sh     # Bootstrap script for initial setup
```

## Tool Restrictions

The skill is restricted to:
- **Read** - Reading configuration files
- **Write** - Creating new configuration files
- **Edit** - Modifying existing configuration
- **Bash(cat:*)** - Displaying file contents
- **Bash(nvim:*)** - Running nvim commands for testing

## Configuration Approaches

### Minimal (Single File)

One `init.lua` file with all configuration inline - suitable for simple setups.

### Modular (Recommended)

Separate files for different concerns:
- Core config in `lua/config/`
- Plugins in `lua/plugins/`
- Overrides in `after/plugin/`

### Per-Plugin Files

Each plugin gets its own spec file in `lua/plugins/` - best for maintainability.

## Common Plugins

**Core:**
- lazy.nvim (plugin manager)
- nvim-lspconfig (LSP)
- mason.nvim (LSP installer)
- nvim-cmp (completion)
- nvim-treesitter (syntax highlighting)

**UI:**
- Telescope (fuzzy finder)
- neo-tree (file explorer)
- lualine (statusline)
- which-key (keybinding hints)

**Development:**
- gitsigns (git integration)
- Comment.nvim (commenting)
- nvim-autopairs (auto pairs)
- trouble.nvim (diagnostics)

**Language-Specific:**
- rust-tools.nvim (Rust)
- go.nvim (Go)
- typescript-tools.nvim (TypeScript)

## Bootstrap Script

Automated setup via `scripts/setup-nvim.sh`:

Creates:
- Complete modular directory structure
- init.lua with module imports
- Core config files (options, keymaps, autocmds)
- Plugin manager bootstrap (lazy.lua)
- Basic plugins (colorscheme, treesitter)

Usage:
```bash
.claude/skills/nvim-config/scripts/setup-nvim.sh
```

## Usage Examples

### Example 1: Initial Setup

**User:** "Set up my Neovim configuration with LSP support"

**Skill:** Creates modular structure → Bootstrap lazy.nvim → Configure LSP → Add essential plugins

### Example 2: Add Plugin

**User:** "Add Telescope fuzzy finder to Neovim"

**Skill:** Creates `lua/plugins/telescope.lua` → Configures plugin → Adds keybindings

### Example 3: Configure LSP

**User:** "Set up gopls for Go development with format on save"

**Skill:** Adds gopls to Mason → Creates server config → Adds format-on-save autocmd

### Example 4: Modify Options

**User:** "Change tab size to 2 spaces in Neovim"

**Skill:** Reads `lua/config/options.lua` → Updates tabstop/shiftwidth → Preserves other settings

### Example 5: Add Keybinding

**User:** "Add Ctrl-s to save file in normal mode"

**Skill:** Reads `lua/config/keymaps.lua` → Adds mapping with description

## Best Practices Enforced

1. **Lua over Vimscript** - Modern Lua-based configuration
2. **Modular structure** - Separate concerns into files
3. **Lazy loading** - Plugins load on demand
4. **LSP-first** - Use built-in LSP support
5. **Descriptive keymaps** - All mappings have descriptions
6. **XDG compliance** - Standard directory locations
7. **Persistent undo** - Enable undofile
8. **Performance** - Disable unused built-in plugins

## Neovim-Specific Features

**Lua API:**
- Better performance than Vimscript
- Native async support
- Cleaner syntax
- First-class LSP support

**XDG Base Directory:**
- Config: `~/.config/nvim/`
- Data: `~/.local/share/nvim/`
- State: `~/.local/state/nvim/`
- Cache: `~/.cache/nvim/`

**Built-in LSP:**
- No plugin needed for basic functionality
- Use `vim.lsp.buf.*` for operations
- Configure via nvim-lspconfig

## Troubleshooting Support

The skill knows how to diagnose:

- **Configuration location issues** (`:echo stdpath('config')`)
- **Plugin loading problems** (`:Lazy`, `:checkhealth`)
- **LSP server issues** (`:LspInfo`, `:Mason`, `:LspRestart`)
- **Keybinding conflicts** (`:map <key>`)
- **Performance problems** (startup profiling, lazy loading)

## Integration with Dotfiles

Since this is part of the dotfiles repository:

1. **Git-tracked** - All configuration is version controlled
2. **Symlinked** - Changes apply immediately to Neovim
3. **Portable** - Configuration works across machines
4. **Atomic** - Changes can be committed individually
5. **Rollbackable** - Git history provides undo capability

## Quick Commands Reference

**Neovim built-in:**
- `:checkhealth` - System diagnostics
- `:Lazy` - Plugin manager UI
- `:Mason` - LSP server installer
- `:LspInfo` - LSP server status
- `:LspRestart` - Restart LSP servers
- `:messages` - View error messages

**Standard paths:**
- `:echo stdpath('config')` - Config directory
- `:echo stdpath('data')` - Data directory
- `:echo $MYVIMRC` - Init file location

## Resources

- **Skill Instructions:** [SKILL.md](./SKILL.md) - Complete configuration guide
- **Advanced Patterns:** [REFERENCE.md](./REFERENCE.md) - Complex setups and examples
- **Bootstrap Script:** [scripts/setup-nvim.sh](./scripts/setup-nvim.sh) - Automated setup
- **Neovim Docs:** https://neovim.io/doc/
- **lazy.nvim:** https://github.com/folke/lazy.nvim
- **nvim-lspconfig:** https://github.com/neovim/nvim-lspconfig

## Testing the Skill

To verify the skill works, try:

1. "Set up a basic Neovim configuration"
2. "Add Telescope fuzzy finder"
3. "Configure Rust LSP with rust-analyzer"
4. "Show my current Neovim options"
5. "Add keybinding for format document"
6. "Change theme to Catppuccin"

## Comparison with Zed Skill

**Similarities:**
- Both configure modern editors
- Both use modular structure
- Both support LSP configuration
- Both handle keybindings

**Differences:**
- Neovim: Lua-based, plugin ecosystem, terminal-based
- Zed: JSON-based, built-in features, GUI-based
- Neovim: More manual setup, more customizable
- Zed: Simpler config, opinionated defaults

---

**Note:** This skill respects your dotfiles workflow and incremental development practices. All changes are atomic, reversible via git, and follow modern Neovim best practices.
